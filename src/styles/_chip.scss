// ==============================================
// Chip Visualizer & Pin Styles
// ==============================================
@use "variables" as *;

// Mixin: 发光效果
@mixin glow($color) {
  background-color: $color;
  box-shadow: 0 0 10px $color;
  z-index: 1; // 确保发光不被遮挡
}

// 控制面板（右侧容器）
.control-panel {
  display: flex;
  flex-direction: column;
  gap: 20px;
  overflow-y: auto; // 允许右侧在小屏幕下独立滚动
  padding-right: 5px; // 留出滚动条空间
}

// 电路可视化区域
.circuit-viz {
  background-color: $ctp-mantle;
  border-radius: $radius-lg;
  min-height: 200px; // 防止被压扁
  display: flex;
  justify-content: center;
  align-items: center;
  border: 1px solid $ctp-surface0;
  box-shadow: $shadow-md;
  position: relative;
  overflow: hidden; // 防止引脚溢出
}

// 芯片本体
.chip {
  width: 140px;
  height: 160px;
  background-color: $ctp-surface1;
  border: 2px solid $ctp-subtext0;
  position: relative;
  border-radius: $radius-sm;
  box-shadow: 4px 4px 0 rgb(0 0 0 / 20%);
  transition: transform $transition-slow;

  // 微交互：悬停时芯片微微浮起
  &:hover {
    transform: translateY(-2px);
  }
}

// 芯片标签
.chip-label {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-weight: bold;
  color: $ctp-text;
  font-size: 1.2rem;
  white-space: nowrap; // 防止换行
}

// 引脚基础样式
.pin {
  position: absolute;
  width: 60px;
  height: 3px; // 稍微加粗线路
  background-color: $ctp-subtext0;
  display: flex;
  align-items: center;

  // 增加过渡动画，让亮起/熄灭更柔和自然
  transition:
    background-color $transition-fast,
    box-shadow $transition-fast;
}

// 引脚标签
.pin-label {
  position: absolute;
  color: $ctp-subtext0;
  font-size: 0.8rem;
  top: -20px;
  font-weight: 600;
}

// 电压显示
.voltage-display {
  position: absolute;
  background: $ctp-crust;
  padding: 2px 6px;
  border-radius: $radius-sm;
  font-family: $font-mono; // 强制等宽字体，数字不跳动
  font-size: 0.75rem;
  color: $ctp-yellow;
  border: 1px solid $ctp-surface0;
  z-index: 10;
}

// ==============================================
// D 输入引脚
// ==============================================
.input-d {
  top: 30px;
  left: -60px;

  .voltage-display {
    left: 0;
    top: -28px;
  }

  .pin-label {
    left: 65px;
    top: -8px;
  }

  &.active {
    @include glow($ctp-blue);
  }
}

// ==============================================
// CLK 时钟引脚
// ==============================================
.input-clk {
  bottom: 30px;
  left: -60px;

  .voltage-display {
    left: 0;
    top: 15px;
  }

  .pin-label {
    left: 65px;
    top: -8px;
  }

  &.active {
    @include glow($ctp-green);
  }
}

// ==============================================
// Q 输出引脚
// ==============================================
.output-q {
  top: 30px;
  right: -60px;

  .voltage-display {
    right: 0;
    top: -28px;
  }

  .pin-label {
    right: 65px;
    top: -8px;
  }

  &.active {
    @include glow($ctp-red);
  }
}
